<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mi Página - Slideshow + Galería + Videos</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#app{height:100%}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:#fff;background:#000;min-height:100vh}

    header{
      position:fixed; top:10px; left:10px; right:10px;
      z-index:120; display:flex; gap:10px; align-items:center; padding-right:12px;
    }
    .nav-left{display:flex;gap:10px;align-items:center}
    .btn{
      background:rgba(0,0,0,0.45);
      border:1px solid rgba(255,255,255,0.08);
      padding:8px 14px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
      color:#fff;
      transition:transform .15s, background .15s;
    }
    .btn:hover{transform:translateY(-2px);background:rgba(255,255,255,0.06)}
    .btn.active{background:rgba(255,255,255,0.12);color:#fff}
    header img.logo{height:40px;}

    header .socials{
      display:flex; align-items:center; gap:12px; margin-left:auto;
    }
    header .socials a img{
      width:32px; height:32px; cursor:pointer;
      transition: transform 0.2s ease, filter 0.2s ease;
    }
    header .socials a img:hover{
      transform: scale(1.2); filter: brightness(1.2);
    }

    .hero {
  position: relative;
  width: 100%;
  height: 100vh;
  background: url("media/slideshow/1.jpg") no-repeat center center;
  background-size: cover;
}

.hero::after {
  content: "";
  position: absolute;
  inset: 0;
  background: inherit; /* copia la imagen */
  filter: blur(20px);
  transform: scale(1.2); /* agranda el blur */
  z-index: -1;
}

    .media-layer{position:absolute; inset:0; width:100%; height:100%; display:flex; align-items:center; justify-content:center;}
    .media-layer video{width:100%;height:100%;object-fit:cover}

    #slideshowLayer{position:absolute; inset:0; width:100%; height:100%; display:flex; align-items:center; justify-content:center; z-index:50;}
    .slide{position:absolute;inset:0;opacity:0;transition:opacity 1s ease;will-change:opacity;}
    .slide.visible{opacity:1;z-index:20;}

    /* Ajuste mixto */
    .full-img {
      position:absolute;
      top:0; left:0; right:0; bottom:0;
      margin:auto;
      max-width:100%;
      max-height:100%;
    }

    .overlay {
      position:absolute; z-index:90; width:100%; top:85vh; text-align:center;
      pointer-events:none; padding:0 24px;
    }
    .text-msg{
      display:inline-block; padding:12px 18px; border-radius:10px;
      background: rgba(0,0,0,0.45); backdrop-filter: blur(3px);
      font-size:clamp(18px,2vw,28px); font-weight:600; text-shadow:0 4px 14px rgba(0,0,0,0.6);
      transform:translateY(10px); opacity:0; transition:opacity .8s, transform .8s;
    }
    .text-msg.show{opacity:1; transform:translateY(0)}

    .dynamic-text{
      position:absolute; z-index:91; width:100%; bottom:30vh; text-align:center;
      font-family:'Playfair Display', serif; font-size:clamp(18px,2.8vw,36px);
      color:#fff; text-shadow:0 6px 24px rgba(0,0,0,0.7);
      opacity:0; transform:translateY(20px); transition:opacity .8s ease, transform .8s ease;
      pointer-events:none; padding:0 20px;
    }
    .dynamic-text.show{opacity:1;transform:translateY(0)}

    /* Sections */
    main{position:relative; z-index:70}
    .section{
      position:fixed; inset:0; display:none;
      background:#000;
      padding:40px; overflow:auto; color:#fff;
    }
    .section .content{max-width:1100px;margin:30px auto;color:#ddd}
    .section.active{display:block}
    h1{color:#fff;margin-bottom:8px}
    p{line-height:1.7}

    /* Gallery */
    .carousel{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .carousel-view{position:relative;flex:1 1 600px;min-height:400px;display:flex;align-items:center;justify-content:center;background:#000}
    .controls{display:flex;flex-direction:column;gap:8px}
    .icon-btn{padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);cursor:pointer;color:#fff}
    .gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;margin-top:18px}
    .gallery-grid img{width:100%;height:100px;object-fit:cover;border-radius:8px;cursor:pointer;transition:transform .3s}
    .gallery-grid img:hover{transform:scale(1.03);}
    .video-grid{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
  </style>
</head>
<body>
  <header>
    <div class="nav-left">
      <button class="btn" data-show="home">Inicio</button>
      <button class="btn" data-show="historia">Mi Historia</button>
      <button class="btn" data-show="galeria">Galería</button>
    </div>

    <div class="socials">
      <img src="media/logo.jpg" alt="Logo" class="logo" onerror="this.style.display='none'">
      <a href="https://facebook.com" target="_blank"><img src="media/icons/Facebook.png" alt="Facebook"></a>
      <a href="https://youtube.com" target="_blank"><img src="media/icons/Youtube.png" alt="YouTube"></a>
      <a href="https://instagram.com" target="_blank"><img src="media/icons/Instagram.png" alt="Instagram"></a>
      <a href="https://tiktok.com" target="_blank"><img src="media/icons/Tiktok.png" alt="TikTok"></a>
    </div>
  </header>

  <div class="hero" id="hero">
    <div class="media-layer">
      <video id="bgVideo" src="media/myvideo.mp4" autoplay loop muted playsinline></video>
    </div>
    <div id="slideshowLayer" aria-hidden="true"></div>
    <div class="overlay"><span class="text-msg" id="changingText">Bienvenido</span></div>
    <div class="dynamic-text" id="dynamicText"></div>
  </div>

  <main>
    <section id="historia" class="section">
      <div class="content">
        <h1>Mi Historia</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Texto de prueba.</p>
      </div>
    </section>

    <section id="galeria" class="section">
      <div class="content">
        <h1>Galería</h1>

        <div class="carousel">
          <div class="carousel-view" id="bigView"><div style="color:#aaa">Cargando galería...</div></div>
          <div class="controls">
            <button id="prevImg" class="icon-btn">◀</button>
            <button id="playPauseGallery" class="icon-btn">⏯</button>
            <button id="nextImg" class="icon-btn">▶</button>
          </div>
        </div>

        <h2 style="margin-top:22px">Miniaturas</h2>
        <div class="gallery-grid" id="thumbGrid"></div>

        <h2 style="margin-top:32px">Videos</h2>
        <div class="video-grid" id="videoGallery"></div>
      </div>
    </section>
  </main>

  <script>
    const slideshowImages=['media/slideshow/1.jpg','media/slideshow/2.jpg','media/slideshow/3.jpg'];
    const galleryImages=['media/gallery/1.jpg','media/gallery/2.jpg','media/gallery/3.jpg','media/gallery/4.jpg'];
    const galleryVideos=['https://www.youtube.com/embed/bFlJQ3Dsq70','https://www.youtube.com/embed/jsoMy61YnQw'];

    const changingTexts = ['Otro Rollo','Cantando por un sueño','Pequeños Gigantes'];

    function adjustImage(img){
      img.onload = () => {
        const aspectImg = img.naturalWidth / img.naturalHeight;
        const aspectWin = window.innerWidth / window.innerHeight;
        if (aspectImg > aspectWin) {
          img.style.width = "100%";
          img.style.height = "auto";
        } else {
          img.style.height = "100%";
          img.style.width = "auto";
        }
      };
    }

    document.addEventListener('DOMContentLoaded',()=>{
      const slideshowLayer=document.getElementById('slideshowLayer');
      const bigView=document.getElementById('bigView');
      const thumbGrid=document.getElementById('thumbGrid');
      const changingTextEl=document.getElementById('changingText');
      const dynamicEl=document.getElementById('dynamicText');
      const hero=document.getElementById('hero');
      const bgVideo=document.getElementById('bgVideo');
      const videoGallery=document.getElementById('videoGallery');
      const btns=document.querySelectorAll('.btn');
      const sections=document.querySelectorAll('.section');

      function createSlide(src){
        const div=document.createElement('div'); div.className='slide';
        const img=document.createElement('img'); img.src=src; img.className='full-img';
        adjustImage(img);
        div.appendChild(img);
        return div;
      }

      let currentSlide=0,slideTimer=null,SLIDE_INTERVAL=6000;
      function setupSlides(){
        slideshowLayer.innerHTML='';
        slideshowImages.forEach((s,i)=>{ const sl=createSlide(s); if(i===0) sl.classList.add('visible'); slideshowLayer.appendChild(sl); });
        if(slideTimer) clearInterval(slideTimer);
        slideTimer=setInterval(nextSlide,SLIDE_INTERVAL);
      }
      function nextSlide(){ const slides=document.querySelectorAll('.slide'); if(slides.length===0) return;
        slides[currentSlide].classList.remove('visible');
        currentSlide=(currentSlide+1)%slides.length;
        slides[currentSlide].classList.add('visible');
      }

      let textIndex=0;
      function rotateChangingTexts(){ changingTextEl.classList.remove('show'); setTimeout(()=>{ changingTextEl.textContent=changingTexts[textIndex]; changingTextEl.classList.add('show'); textIndex=(textIndex+1)%changingTexts.length; },350); }
      setInterval(rotateChangingTexts,4200); rotateChangingTexts();

      function showSection(name){
        btns.forEach(b=>b.classList.toggle('active',b.dataset.show===name));
        if(name==='home'){ sections.forEach(s=>s.classList.remove('active')); hero.style.display='flex'; slideshowLayer.style.display='flex';
          if(slideTimer) clearInterval(slideTimer); slideTimer=setInterval(nextSlide,SLIDE_INTERVAL);
          try{ if(bgVideo && typeof bgVideo.currentTime!=='undefined'){ bgVideo.currentTime=0; bgVideo.play().catch(()=>{}); } }catch(e){}; return;
        }
        hero.style.display='none'; sections.forEach(s=>s.classList.toggle('active',s.id===name));
        if(slideTimer) clearInterval(slideTimer);
      }
      btns.forEach(b=>b.addEventListener('click',()=>showSection(b.dataset.show)));

      /* Gallery */
      let galleryIndex=0,galleryTimer=null,galleryPlaying=true;
      function renderGallery(){
        thumbGrid.innerHTML='';
        galleryImages.forEach((src,i)=>{ const t=document.createElement('img'); t.src=src; t.addEventListener('click',()=>showGalleryImage(i)); thumbGrid.appendChild(t); });
        showGalleryImage(0);
        galleryTimer=setInterval(()=>showGalleryImage((galleryIndex+1)%galleryImages.length),3500);
      }
      function showGalleryImage(i){ galleryIndex=i; bigView.innerHTML=''; const img=document.createElement('img'); img.src=galleryImages[i]; img.className='full-img'; adjustImage(img); bigView.appendChild(img); }
      document.getElementById('prevImg').addEventListener('click',()=>showGalleryImage((galleryIndex-1+galleryImages.length)%galleryImages.length));
      document.getElementById('nextImg').addEventListener('click',()=>showGalleryImage((galleryIndex+1)%galleryImages.length));
      document.getElementById('playPauseGallery').addEventListener('click',()=>{ galleryPlaying=!galleryPlaying; if(galleryPlaying) galleryTimer=setInterval(()=>showGalleryImage((galleryIndex+1)%galleryImages.length),3500); else clearInterval(galleryTimer); });

      /* Video gallery */
      function renderVideoGallery(){ videoGallery.innerHTML=''; galleryVideos.forEach(src=>{ const wrap=document.createElement('div'); wrap.style.flex='1 1 300px'; wrap.style.minHeight='200px'; wrap.innerHTML=`<iframe width="100%" height="100%" src="${src}" frameborder="0" allowfullscreen></iframe>`; videoGallery.appendChild(wrap); }); }

      try{ setupSlides(); renderGallery(); renderVideoGallery(); showSection('home'); }catch(err){console.error(err);}
      document.addEventListener('keydown',e=>{ if(e.key==='Escape') showSection('home'); });

      bgVideo.addEventListener('click',()=>showSection('home'));
    });
  </script>
</body>
</html>
